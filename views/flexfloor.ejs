<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlexFloor by WideSpread</title>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="icon" href="/images/system/widespread_logo_1a1a1a.ico" />
    <link href="https://fonts.googleapis.com/css2?family=Gruppo&family=Roboto:ital,wght@0,100;0,400;0,500;0,700;1,100&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/080e00a6ec.js" crossorigin="anonymous"></script>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-html-shader@0.2.0/dist/aframe-html-shader.min.js"></script>
    <script src="https://unpkg.com/aframe-websurfaces@1.4.0/dist/aframe-websurfaces.umd.js"></script>
    <script src="https://unpkg.com/aframe-layout-component@4.3.1/dist/aframe-layout-component.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@5.0.0/dist/aframe-event-set-component.min.js"></script>
    <!-- Greenscreen -->
    <script src="https://unpkg.com/aframe-chromakey-material/dist/aframe-chromakey-material.min.js"></script>

    <script src="https://rawgit.com/flysonic10/aframe-passthrough/master/dist/aframe-passthrough-component.min.js"></script>

    <script src="https://rawgit.com/rdub80/aframe-gui/master/dist/aframe-gui.min.js"></script>
    <link rel="stylesheet" href="/style/main.css">
    <link rel="stylesheet" href="/style/vr.css">
</head>
<body>

    <%- include('./partials/layout/core-menu-vr'); %>

    <script>
    AFRAME.registerComponent('rotation-reader', {
        tick: function () {
            // `this.el` is the element.
            // `object3D` is the three.js object.

            // `rotation` is a three.js Euler using radians. `quaternion` also available.
            //console.log(this.el.object3D.rotation);

            // `position` is a three.js Vector3.


            // console.log(this.el.object3D.position);
            const position = this.el.object3D.position
            const menuEl = document.getElementById('vrMenu')
            menuEl.setAttribute('position', {x: position.x, y: 0.1, z: (position.z - 0.4)})
        }
    });

    </script>
    <a-scene loading-screen="dotsColor: lightskyblue; backgroundColor: black">
        <a-assets>
            <!-- Pattern_1 -->
            <img id="pat1_Img" src="/images/system/vr/walls/pattern_1/img.png" alt="">
            <img id="pat1_Map" src="/images/system/vr/walls/pattern_1/map.png" alt="">
            <img id="pat1_Dis" src="/images/system/vr/walls/pattern_1/displacement.png" alt="">
            <img id="pat1_Occ" src="/images/system/vr/walls/pattern_1/occlusion.png" alt="">
            <!-- Log 1 -->
            <img id="log1_Img" src="/images/system/vr/walls/log_1/img.png" alt="">
            <img id="log1_Dis" src="/images/system/vr/walls/log_1/displacement.png" alt="">
            <img id="log1_Height" src="/images/system/vr/walls/log_1/height.png" alt="">
            <img id="log1_Norm" src="/images/system/vr/walls/log_1/normal.png" alt="">
            <img id="log1_Rough" src="/images/system/vr/walls/log_1/roughness.png" alt="">
            
            
            <!-- Oak Floor 1 -->
            
            <img id="oak1_Img" src="/images/system/vr/floors/oak/img.png" alt="">
            <img id="oak1_Height" src="/images/system/vr/floors/oak/height.png" alt="">
            <img id="oak1_Rough" src="/images/system/vr/floors/oak/roughness.png" alt="">

            <!-- 3D Models -->
            <a-asset id="couch1obj" src="/models/furniture/obj/couch.obj"></a-asset>
            <a-asset id="couch1mtl" src="/models/furniture/obj/couch.mtl"></a-asset>
        </a-assets>

                <a-entity id="cameraRig" position="0 1.6 0">
                    <a-camera look-controls wasd-controls rotation-reader position="0 0 0">
                        <a-gui-cursor id="cursor" raycaster="objects: [gui-interactable]" fuse="true" fuse-timeout="2000"
                            color="#888" hover-color="#fff" active-color="lightskyblue" design="ring">
                            <!-- dot, ring, reticle, cross  -->
                        </a-gui-cursor> <!-- /cursor -->

                    </a-camera> <!-- /camera -->
                </a-entity>

                <a-gui-flex-container rotation="-90 0 0" id="vrMenu">
                    <a-gui-button position="0 0.5 0" gui-button="backgroundColor: #000; borderColor: lightskyblue; fontColor: lightskyblue; activeColor: #888; hoverColor: hotpink;" value="Menu"></a-gui-button>
                </a-gui-flex-container>
                <!-- <a-entity id="vrMenu">
                    <a-box scale="0.3 0.3 0.3" color="red"></a-box>

                </a-entity> -->
        <%- body %>










    </a-scene>
